# YouTube Live Chat Collector

YouTubeãƒ©ã‚¤ãƒ–é…ä¿¡ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åé›†ãƒ»ä¿å­˜ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

- YouTubeãƒãƒ£ãƒ³ãƒãƒ«ã®ãƒ©ã‚¤ãƒ–é…ä¿¡ã‚’24æ™‚é–“è‡ªå‹•ç›£è¦–
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’åé›†ãƒ»ä¿å­˜
- å®Œå…¨ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»é–²è¦§
- AWSä¸Šã§ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹æ§‹æˆã«ã‚ˆã‚Šä½ã‚³ã‚¹ãƒˆã§é‹ç”¨
- å•†ç”¨ãƒ¬ãƒ™ãƒ«ã®å®‰å®šæ€§ã¨æ©Ÿèƒ½ã‚’å®Ÿç¾

## ğŸŒ Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

**ä¸»è¦æ©Ÿèƒ½**:
- ğŸ“Š **ã‚·ã‚¹ãƒ†ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆè¡¨ç¤º
- ğŸ“º **ãƒãƒ£ãƒ³ãƒãƒ«ç®¡ç†**: å®Œå…¨ãªCRUDæ“ä½œ
- ğŸ”´ **ã‚¢ã‚¯ãƒ†ã‚£ãƒ–é…ä¿¡ç›£è¦–**: ãƒ©ã‚¤ãƒ–é…ä¿¡çŠ¶æ³è¡¨ç¤º
- ğŸ’¬ **ã‚³ãƒ¡ãƒ³ãƒˆåé›†ç®¡ç†**: åé›†ãƒ‡ãƒ¼ã‚¿ç¢ºèªãƒ»åˆ¶å¾¡

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React.js + TypeScript (S3 Static Website)
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: AWS Lambda + API Gateway + DynamoDB
- **ã‚³ãƒ¡ãƒ³ãƒˆåé›†**: ECS Fargate + pytchat
- **ã‚¤ãƒ³ãƒ•ãƒ©**: Terraform (110ãƒªã‚½ãƒ¼ã‚¹å®Œå…¨è‡ªå‹•åŒ–)
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Ansible (å®Œå…¨è‡ªå‹•åŒ–)
- **ç›£è¦–**: CloudWatch + EventBridge

### **ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React.js      â”‚    â”‚   API Gateway    â”‚    â”‚   Lambda        â”‚
â”‚   Frontend      â”‚â—„â”€â”€â–ºâ”‚   REST API       â”‚â—„â”€â”€â–ºâ”‚   Functions     â”‚
â”‚   (S3 Website)  â”‚    â”‚                  â”‚    â”‚   (4 Functions) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EventBridge   â”‚    â”‚   SQS Queue      â”‚    â”‚   DynamoDB      â”‚
â”‚   (Scheduler)   â”‚â—„â”€â”€â–ºâ”‚   (Task Control) â”‚â—„â”€â”€â–ºâ”‚   (4 Tables)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ECS Fargate   â”‚    â”‚   ECR Registry   â”‚    â”‚   CloudWatch    â”‚
â”‚   (Comment      â”‚â—„â”€â”€â–ºâ”‚   (Container     â”‚â—„â”€â”€â–ºâ”‚   (Logs &       â”‚
â”‚    Collector)   â”‚    â”‚    Images)       â”‚    â”‚    Monitoring)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
â”œâ”€â”€ terraform/                 # ã‚¤ãƒ³ãƒ•ãƒ©å®šç¾©
â”‚   â”œâ”€â”€ environments/
â”‚   â”‚   â””â”€â”€ dev/               # é–‹ç™ºç’°å¢ƒè¨­å®š
â”‚   â””â”€â”€ modules/               # Terraformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚       â”œâ”€â”€ networking/        # VPCã€ã‚µãƒ–ãƒãƒƒãƒˆ
â”‚       â”œâ”€â”€ storage/           # DynamoDB
â”‚       â”œâ”€â”€ compute/           # Lambdaã€ECS
â”‚       â”œâ”€â”€ messaging/         # SQSã€EventBridge
â”‚       â”œâ”€â”€ api/              # API Gateway
â”‚       â”œâ”€â”€ frontend/         # S3ã€CloudFront
â”‚       â””â”€â”€ integration/      # ã‚µãƒ¼ãƒ“ã‚¹é–“çµ±åˆ
â”œâ”€â”€ src/                      # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ lambda/               # Lambdaé–¢æ•°
â”‚   â”‚   â”œâ”€â”€ rss_monitor/      # RSSç›£è¦–
â”‚   â”‚   â”œâ”€â”€ stream_status_checker/  # é…ä¿¡çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ ecs_task_launcher/      # ECSåˆ¶å¾¡
â”‚   â”‚   â””â”€â”€ api_handler/      # REST API
â”‚   â”œâ”€â”€ ecs/                  # ECSã‚³ãƒ³ãƒ†ãƒŠ
â”‚   â”‚   â””â”€â”€ comment_collector/ # ã‚³ãƒ¡ãƒ³ãƒˆåé›†
â”‚   â””â”€â”€ frontend/             # Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚       â””â”€â”€ youtube-chat-viewer/
â”œâ”€â”€ ansible/                  # ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–
â”‚   â”œâ”€â”€ deploy-all.yml        # å®Œå…¨ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ—ãƒ­ã‚¤
â”‚   â”œâ”€â”€ quick-deploy.yml      # å€‹åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ‡ãƒ—ãƒ­ã‚¤
â”‚   â”œâ”€â”€ playbooks/            # å·¥ç¨‹åˆ¥ãƒ—ãƒ¬ã‚¤ãƒ–ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ 01-pre-checks.yml      # äº‹å‰ãƒã‚§ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ 02-deploy-lambda.yml   # Lambdaé–¢æ•°ãƒ‡ãƒ—ãƒ­ã‚¤
â”‚   â”‚   â”œâ”€â”€ 03-deploy-container.yml # ECSã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤
â”‚   â”‚   â”œâ”€â”€ 04-deploy-frontend.yml # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤
â”‚   â”‚   â”œâ”€â”€ 05-post-verification.yml # ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œæ¤œè¨¼
â”‚   â”‚   â””â”€â”€ old/              # æ—§ãƒ—ãƒ¬ã‚¤ãƒ–ãƒƒã‚¯ä¿ç®¡
â”‚   â””â”€â”€ roles/                # Ansibleãƒ­ãƒ¼ãƒ«
â”‚       â”œâ”€â”€ lambda-deployment/     # Lambdaé–¢æ•°ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ãƒ¼ãƒ«
â”‚       â””â”€â”€ container-deployment/  # ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ãƒ¼ãƒ«
â””â”€â”€ docs/                     # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    â”œâ”€â”€ design_system.md      # ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸
    â”œâ”€â”€ design_functional.md  # æ©Ÿèƒ½è¨­è¨ˆæ›¸
    â”œâ”€â”€ spec_data_model.md    # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ä»•æ§˜
    â”œâ”€â”€ spec_api.md           # APIä»•æ§˜æ›¸
    â””â”€â”€ log_development_with_q_developer.md # é–‹ç™ºè¨˜éŒ²
```
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. å‰ææ¡ä»¶

- AWS CLIè¨­å®šæ¸ˆã¿
- Terraform >= 1.0
- Ansible >= 2.9
- Docker
- Node.js >= 16

### 2. ç’°å¢ƒè¨­å®š

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd 250820_YoutubeLiveChatCollector

# Terraformå¤‰æ•°è¨­å®š
cp terraform/environments/dev/terraform.tfvars.example terraform/environments/dev/terraform.tfvars
# terraform.tfvarsã‚’ç·¨é›†ã—ã¦YouTube API Keyãªã©ã‚’è¨­å®š
```

### 3. ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰

```bash
cd terraform/environments/dev
terraform init
terraform plan
terraform apply
```

### 4. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤

#### ğŸš€ ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰å®Œå…¨ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ¨å¥¨ï¼‰

```bash
cd ansible
ansible-playbook deploy-all.yml
```

**å®Ÿè¡Œå†…å®¹**:
- äº‹å‰ãƒã‚§ãƒƒã‚¯ï¼ˆAWS CLIã€Dockerã€Node.jsã€TerraformçŠ¶æ…‹ï¼‰
- Lambdaé–¢æ•°ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆ4é–¢æ•°ï¼‰
- ECSã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆComment Collectorï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆReact.js â†’ S3ï¼‰
- ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œæ¤œè¨¼ï¼ˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼‰

#### ğŸ¯ å€‹åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Lambdaé–¢æ•°ã®ã¿
ansible-playbook quick-deploy.yml -e "component=lambda"

# ECSã‚³ãƒ³ãƒ†ãƒŠã®ã¿
ansible-playbook quick-deploy.yml -e "component=container"

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿
ansible-playbook quick-deploy.yml -e "component=frontend"
```

#### ğŸ“‹ å·¥ç¨‹åˆ¥ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# äº‹å‰ãƒã‚§ãƒƒã‚¯
ansible-playbook playbooks/01-pre-checks.yml

# Lambdaé–¢æ•°ãƒ‡ãƒ—ãƒ­ã‚¤
ansible-playbook playbooks/02-deploy-lambda.yml

# ECSã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤
ansible-playbook playbooks/03-deploy-container.yml

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤
ansible-playbook playbooks/04-deploy-frontend.yml

# ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œæ¤œè¨¼
ansible-playbook playbooks/05-post-verification.yml
```

## ä½¿ç”¨æ–¹æ³•

1. Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ç›£è¦–ã—ãŸã„YouTubeãƒãƒ£ãƒ³ãƒãƒ«ã‚’è¿½åŠ 
3. ãƒ©ã‚¤ãƒ–é…ä¿¡ãŒé–‹å§‹ã•ã‚Œã‚‹ã¨è‡ªå‹•çš„ã«ã‚³ãƒ¡ãƒ³ãƒˆåé›†é–‹å§‹
4. åé›†ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã‚’Webã§ç¢ºèª

## è¨­å®š

### YouTube Data API

1. Google Cloud Consoleã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
2. YouTube Data API v3ã‚’æœ‰åŠ¹åŒ–
3. APIã‚­ãƒ¼ã‚’å–å¾—
4. `terraform.tfvars`ã«è¨­å®š

### IPåˆ¶é™

æœ¬ç•ªç’°å¢ƒã§ã¯`allowed_ip_addresses`ã‚’é©åˆ‡ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚

## ç›£è¦–ãƒ»é‹ç”¨

- CloudWatch Logsã§ãƒ­ã‚°ç¢ºèª
- DynamoDBã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª
- ã‚³ã‚¹ãƒˆç›£è¦–ï¼ˆæœˆé¡$2-3æƒ³å®šï¼‰

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **YouTube APIåˆ¶é™**
   - 1æ—¥10,000 unitsåˆ¶é™
   - åˆ¶é™è¶…éæ™‚ã¯ç¿Œæ—¥ã¾ã§å¾…æ©Ÿ

2. **ECS Taskèµ·å‹•å¤±æ•—**
   - CloudWatch Logsã§ã‚¨ãƒ©ãƒ¼ç¢ºèª
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®šç¢ºèª

3. **Lambdaé–¢æ•°ã‚¨ãƒ©ãƒ¼**
   - CloudWatch Logsã§ã‚¨ãƒ©ãƒ¼è©³ç´°ç¢ºèª
   - IAMæ¨©é™è¨­å®šç¢ºèª

## é–‹ç™º

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cd src/frontend/react-app
npm start

# Lambdaé–¢æ•°ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ
cd src/lambda/rss_monitor
python -m pytest tests/
```

### ãƒ‡ãƒ—ãƒ­ã‚¤

å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã¯`docs/deployment_guide.md`ã‚’å‚ç…§

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ã‚¤ã‚·ãƒ¥ãƒ¼ã®å ±å‘Šã‚’æ­“è¿ã—ã¾ã™ã€‚

---

**ä½œæˆæ—¥**: 2025-08-21  
**æœ€çµ‚æ›´æ–°**: 2025-08-23  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0  
**ã‚·ã‚¹ãƒ†ãƒ å®Œæˆåº¦**: 98% (å•†ç”¨é‹ç”¨å¯èƒ½ãƒ¬ãƒ™ãƒ«)
